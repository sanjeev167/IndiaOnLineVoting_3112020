<%@ taglib prefix="security"
	uri="http://www.springframework.org/security/tags"%>

	<div class="modal fade " id="showVoterIdForOffline">
		<div class="modal-dialog modal-sm ">
			<div class="modal-content" style="border-radius: 10px;">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title"><b style="color: red;">Offline-Voting</b> Identification </h4>
				</div>
				<div class="modal-body " style="border-radius: 10px;">
				
				
				       <div class="form-group has-feedback" style="width: 100%">
									     <div class="input-group" >								
											<input type="text" class="form-control" name="voteVoterId" id="voteVoterId" placeholder="13 digit Voter-Id"
												data-inputmask="'mask': '99-99-99-999-9999'" data-mask>
												<div class="input-group-addon" style="background-color: blue;" id="voteVoterIdVerifyBgId">
										            <i><a href="#" id="voteVoterIdVerify" style="color: yellow;"><strong id="voteVoterIdButtonId">Verify</strong></a></i>
									            </div>
										</div>
										<!-- /.input group -->
										<span id="voteVoterId_err" style="color:red; font-weight:bold;"></span>
					</div>
				    <!-- /.form group -->
				    <div class="form-group has-feedback" style="width: 100%">
									     <div class="input-group" >								
											<input type="text" class="form-control" name="secret" id="secretId" placeholder="Voting Secret">
												<div class="input-group-addon" style="background-color: grey;" id="secretBgColorId">
										            <i><a href="#" id="secretVerifyId" style="color: yellow;"><strong id="secretButtonId">Verify</strong></a></i>
									            </div>
										</div>
										<!-- /.input group -->
										<span id="secret_err" style="color:red; font-weight:bold;"></span>
					</div>
				    <!-- /.form group -->
				    
				    <div class="form-group" style="width: 100%">
									     <div class="input-group" >	<label>Election:</label> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;							
											<input type="radio"  name="ecType" value="A" id="ecTypeId" checked="checked">	&nbsp;&nbsp; Assembly
											<input type="radio" name="ecType" value="L" id="ecTypeId">	&nbsp;&nbsp; Loksabha											
										</div>										
					</div>
				    <!-- /.form group -->
				    
					

					<p>In actual, it'll be <span style="font-weight: bold; color: red;">exercised through an EVM</span> </p>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default pull-left"
						data-dismiss="modal">Close</button>
					<button type="button" class="btn btn-primary" id="voteVoterVerificationSubmitId">Submit
						Identity Proof</button>
				</div>
			</div>
			<!-- /.modal-content -->
		</div>
		<!-- /.modal-dialog -->
	</div>
	<!-- /.modal -->
	
	
	<div class="modal fade " id="showVoterIdForOnline">
		<div class="modal-dialog modal-sm ">
			<div class="modal-content" style="border-radius: 10px;">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title"><b style="color: red;">Online-Voting</b> Identification </h4>
				</div>
				<div class="modal-body " style="border-radius: 10px;">
					<p>
						Voter-Id: <input type="text" name="voterId" class="pull-right">
					</p>
					<p>
						Secret: <input type="text" name="secret" class="pull-right">
					</p>
					<p>
						Voting-OTP: <input type="password" name="otp" class="pull-right">
					</p>

					<p >Check <b style="font-weight: bold; color: red;">Voting-OTP</b> at your Mobile</p>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default pull-left"
						data-dismiss="modal">Close</button>
					<button type="button" class="btn btn-primary">Submit
						Identity Proof</button>
				</div>
			</div>
			<!-- /.modal-content -->
		</div>
		<!-- /.modal-dialog -->
	</div>
	<!-- /.modal -->
	
	<div class="modal fade " id="athenticationRequiredId">
		<div class="modal-dialog modal-sm ">
			<div class="modal-content" style="border-radius: 10px;">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title"><b style="color: red;">Authentication</b> Required </h4>
				</div>
				<div class="modal-body " style="border-radius: 10px;">
					<b>First authenticate [<span style="color:red;">Login</span>] yourself.</b>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default pull-left"
						data-dismiss="modal">Close</button>
					<button type="button" class="btn btn-primary">OK</button>
				</div>
			</div>
			<!-- /.modal-content -->
		</div>
		<!-- /.modal-dialog -->
	</div>
	<!-- /.modal -->
	
	
<header class="main-header">
	<nav class="navbar navbar-static-top">
		<div class="container" style="margin-left: 2%; padding-left: 2px;">
			<div class="navbar-header">
				<img
					src="<%request.getContextPath();%>/resources/assets/ec/img/logo.png"
					height="10%;" width="68%">
			</div>
			<!-- Collect the nav links, forms, and other content for toggling -->
			<div class="collapse navbar-collapse pull-left" id="navbar-collapse">
				<ul class="nav navbar-nav" style=" font-weight: bold">
					<li><a href="http://localhost:8080/"><i class="fa fa-home"></i></a></li>
					<li><a href="/pvt/voter/db"><i class="fa fa-home"></i>Voter</a></li>
					<li><a href="/pvt/adm/db"><i class="fa fa-home"></i>Adm</a></li>
					<li><a href="/pub/vote/result">EC-Result</a></li>
					<li><a href="#" id="offineLinkId">Vote-Offline</a></li>
					<li><a href="#" id="onlineLinkId" style="color:yellow;">Vote-Online</a></li>
					
					<li><a href="/pvt/voter/lock_vote"><i class="fa fa-lock" style="color:yellow"></i> - Online-Vote</a></li>
				</ul>
			</div>
			<!-- /.navbar-collapse -->
			<!-- Navbar Right Menu -->
			<div class="navbar-custom-menu pull-right">
				<ul class="nav navbar-nav">
					<li><a href="/pub/voter/login">Login</a></li>
					<li><a href="/pub/hm/reg/">Reg</a></li>					
				</ul>
			</div>
			<!-- /.navbar-custom-menu -->
		</div>
		<!-- /.container-fluid -->
	</nav>


</header>

<!-- jQuery 3 -->
<script
	src="<%request.getContextPath();%>/resources/assets/bower_components/jquery/dist/jquery.min.js"></script>


<script type="text/javascript">
	$(document).ready(function() {
		//Initialize Maskin
		$('[data-mask]').inputmask();
		//Disable anchor links
		$('#secretVerifyId').css('pointer-events', 'none');

		$("#voteVoterVerificationSubmitId").attr("disabled",true);
				
		$("#offineLinkId").click(function() {
			$('#showVoterIdForOffline').modal('show');
				//window.open("/pub/vote/offline")
		});
		
		$("#onlineLinkId").click(function() {
			//$('#athenticationRequiredId').modal('show');
			$('#showVoterIdForOnline').modal('show');
			//	window.open("/pvt/vote/online")
		});

	});
//Voter Id verification
	$("#voteVoterIdVerify").click(function() {			
	    event.preventDefault();	 alert("NN");	
		var voteVoterId = $("#voteVoterId").val();	
			///Ajax call Started	
				$.ajax({
					type : 'POST',
					url : "/pub/hm/voter/voterIdVerification?voteVoterId="+voteVoterId,		
					beforeSend : function(xhr) {
						xhr.setRequestHeader("Accept", "application/json");
						xhr.setRequestHeader("Content-Type", "application/json");
					},
					success : function(response) {
						alert("Response is coming");
						$('#successMsgId').html("<span style='color:green;font:bold;'>"+response.statusMsg+"</span>");
						if(response.status){
							//Do something if required	
							$("#voteVoterId_err").html("");//Clean previous error msg if any
							
							//if Voter id is verified . Turn its background green and show action response.               
							$('#voteVoterIdVerifyBgId').css('background-color', 'green'); 
							$('#voteVoterIdButtonId').text("Verified");
							//Disable voterId Verification once verified               
							$('#voteVoterId').prop("disabled",true);
							$('#voteVoterIdVerify').css('pointer-events', 'none');
							//Enable anchor tag                
							$('#secretVerifyId').css('pointer-events', 'auto');											
							//Change background of aadhar verification on voter id verifcation success
							$('#secretBgColorId').css('background-color', 'blue');												
						}else{
							alert("Form has an error = "+response.statusMsg);
							$("#voteVoterId_err").html(response.statusMsg);
						}
					},
					error : function(jqXHR, exception) {			
						formatErrorMessage(jqXHR, exception);
					}
				});
			///Ajax call ends
	});
//Voter Id verification ends

//Secret Id verification
	$("#secretVerifyId").click(function() {			
	    event.preventDefault();	 alert("MM");	
		var secretId = $("#secretId").val();	
			///Ajax call Started	
				$.ajax({
					type : 'POST',
					url : "/pub/hm/voter/secretIdVerification?secretId="+secretId,		
					beforeSend : function(xhr) {
						xhr.setRequestHeader("Accept", "application/json");
						xhr.setRequestHeader("Content-Type", "application/json");
					},
					success : function(response) {
						alert("Response is coming");
						$('#successMsgId').html("<span style='color:green;font:bold;'>"+response.statusMsg+"</span>");
						if(response.status){
							//Do something if required	
							$("#secret_err").html("");//Clean previous error msg if any							
							//if Voter id is verified . Turn its background green and show action response.               
							$('#secretBgColorId').css('background-color', 'green'); 
							//Disable voterId Verification once verified               
							$('#secretId').prop("disabled",true);
							$('#secretVerifyId').css('pointer-events', 'none');
							$('#secretButtonId').text("Verified"); 
							  
							$("#voteVoterVerificationSubmitId").attr("disabled",false);     
																			
						}else{
							alert("Form has an error = "+response.statusMsg);
							$("#secret_err").html(response.statusMsg);
						}
					},
					error : function(jqXHR, exception) {			
						formatErrorMessage(jqXHR, exception);
					}
				});
			///Ajax call ends
	});
//Voter Id verification ends
	
</script>
